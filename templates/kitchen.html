<!DOCTYPE html>
<html>
<head>
    <title>YUMZO Kitchen LIVE</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <header class="header">
        <h1 class="orange-glow">LIVE KITCHEN FEED</h1>
    </header>

    <div id="kitchen-feed" style="padding:20px; display:grid; grid-template-columns:repeat(auto-fit, minmax(300px, 1fr)); gap:20px;">
        </div>

    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script>
        firebase.initializeApp({projectId: "yumzo-dee28"});
        const db = firebase.firestore();

        db.collection("orders")
          .where("status", "==", "New")
          .orderBy("createdAt", "asc")
          .onSnapshot(snapshot => {
            const feed = document.getElementById('kitchen-feed');
            feed.innerHTML = "";
            snapshot.forEach(doc => {
                const order = doc.data();
                feed.innerHTML += `
                    <div class="glass-card" style="padding:25px; border-left: 8px solid var(--primary);">
                        <h2 style="margin:0;">#${order.orderNum} <span style="font-size:0.9rem; opacity:0.6;">(${order.source})</span></h2>
                        <ul style="font-size:1.4rem; padding:15px 0; list-style:none;">
                            ${order.items.map(i => `<li><i class="fas fa-check-circle" style="color:var(--primary);"></i> ${i.name}</li>`).join('')}
                        </ul>
                        <button class="btn-confirm" onclick="completeOrder('${doc.id}')">DONE / CLEAR</button>
                    </div>
                `;
            });
        });

        function completeOrder(id) {
            db.collection("orders").doc(id).update({ status: "Completed" });
        }
    </script>
</body>
</html>
