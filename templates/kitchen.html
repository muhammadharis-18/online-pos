<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>YUMZO Kitchen</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        .order-card { background: #1e293b; padding: 20px; border-radius: 15px; margin-bottom: 20px; border-left: 10px solid #f59e0b; }
        .item-list { font-size: 1.5rem; font-weight: bold; list-style: none; padding: 0; }
        .status-btn { background: #22c55e; color: black; padding: 10px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body class="dark-mode">
    <h1>üë®‚Äçüç≥ Kitchen Display</h1>
    <div id="kitchen-orders">
        </div>

    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script>
        // Use the config from your image
        const firebaseConfig = {
            apiKey: "AIzaSyC6wmZVwGrjFM-fkIY4nRIpXdfCCbXaRh4",
            authDomain: "yumzo-dee28.firebaseapp.com",
            projectId: "yumzo-dee28",
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Listen for new orders in Real-time
        db.collection("orders").orderBy("createdAt", "desc").onSnapshot((snapshot) => {
            const container = document.getElementById('kitchen-orders');
            container.innerHTML = "";
            snapshot.forEach((doc) => {
                const order = doc.data();
                if(order.status !== "Completed") {
                    container.innerHTML += `
                        <div class="order-card">
                            <h2>Order #${order.orderNum} (${order.source})</h2>
                            <ul class="item-list">
                                ${order.items.map(i => `<li>‚Ä¢ ${i.name}</li>`).join('')}
                            </ul>
                            <button class="status-btn" onclick="completeOrder('${doc.id}')">DONE / CLEAR</button>
                        </div>
                    `;
                }
            });
        });

        function completeOrder(id) {
            db.collection("orders").doc(id).update({ status: "Completed" });
        }
    </script>
</body>
</html>
